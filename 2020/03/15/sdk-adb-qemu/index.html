<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zn">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="qemu," />










<meta name="description" content="SDKemulator${ANDROID_SDK_HOME}&#x2F;emulator 这个qemu是avd模拟器简化的**${ANDROID_SDK_HOME}&#x2F;emulator&#x2F;qemu&#x2F;darwin-x86_64&#x2F;&#x2F;qemu-system-x86_64** 不使用 12emulator -list-avdsemulator -avd Pixel_3_API_29 -writable-system -">
<meta property="og:type" content="article">
<meta property="og:title" content="sdk-adb-qemu">
<meta property="og:url" content="http://notify-bibi.github.io/2020/03/15/sdk-adb-qemu/index.html">
<meta property="og:site_name" content="notifyのblog">
<meta property="og:description" content="SDKemulator${ANDROID_SDK_HOME}&#x2F;emulator 这个qemu是avd模拟器简化的**${ANDROID_SDK_HOME}&#x2F;emulator&#x2F;qemu&#x2F;darwin-x86_64&#x2F;&#x2F;qemu-system-x86_64** 不使用 12emulator -list-avdsemulator -avd Pixel_3_API_29 -writable-system -">
<meta property="og:locale">
<meta property="article:published_time" content="2020-03-15T04:36:21.000Z">
<meta property="article:modified_time" content="2021-03-03T13:40:20.871Z">
<meta property="article:author" content="notify">
<meta property="article:tag" content="qemu">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://notify-bibi.github.io/2020/03/15/sdk-adb-qemu/"/>





  <title>sdk-adb-qemu | notifyのblog</title>
  








<meta name="generator" content="Hexo 5.4.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zn">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">notifyのblog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://notify-bibi.github.io/2020/03/15/sdk-adb-qemu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="notifyのblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">sdk-adb-qemu</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-15T12:36:21+08:00">
                2020-03-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="SDK"><a href="#SDK" class="headerlink" title="SDK"></a>SDK</h1><h2 id="emulator"><a href="#emulator" class="headerlink" title="emulator"></a>emulator</h2><p>${ANDROID_SDK_HOME}/emulator</p>
<p>这个qemu是avd模拟器简化的**${ANDROID_SDK_HOME}/emulator/qemu/darwin-x86_64//qemu-system-x86_64** 不使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">emulator -list-avds</span><br><span class="line">emulator -avd Pixel_3_API_29 -writable-system -no-snapstorage</span><br></pre></td></tr></table></figure>

<p><code>avd</code>在<code>$HOME/.android/avd</code></p>
<h2 id="adb"><a href="#adb" class="headerlink" title="adb"></a>adb</h2><p>${ANDROID_SDK_HOME}/platform-tools/adb</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$adb</span> start-server //启动adb</span><br><span class="line"><span class="variable">$adb</span> kill-server</span><br><span class="line"><span class="comment">#-l 锁定该程序</span></span><br><span class="line"><span class="comment">#-r 重新安装该程序，保存数据</span></span><br><span class="line"><span class="comment">#-s 安装在SD卡内，而不是设备内部存储</span></span><br><span class="line"><span class="variable">$adb</span> install -r [apk文件]</span><br><span class="line"><span class="comment">#日志</span></span><br><span class="line"><span class="variable">$adb</span> logcat | grep <span class="string">&quot;jc&quot;</span></span><br><span class="line"><span class="comment">#radio 输出通信系统的log</span></span><br><span class="line"><span class="comment">#system 输出系统组件的log</span></span><br><span class="line"><span class="comment">#events 输出event的log</span></span><br><span class="line"><span class="comment">#main 输出java层的log</span></span><br><span class="line"><span class="variable">$adb</span> logcat -b radio</span><br><span class="line"><span class="comment">#强杀</span></span><br><span class="line"><span class="variable">$adb</span> shell am force-stop &lt;packagename&gt;</span><br><span class="line"><span class="comment">#获取设备的ID和序列号</span></span><br><span class="line"><span class="variable">$adb</span> get-product </span><br><span class="line"><span class="variable">$adb</span> root</span><br><span class="line"><span class="variable">$adb</span> disable-verity</span><br><span class="line"><span class="variable">$adb</span> shell getprop ro.product.cpu.abi</span><br><span class="line"><span class="variable">$adb</span> shell <span class="string">&#x27;mount -o rw,remount -t auto /system&#x27;</span></span><br><span class="line"><span class="variable">$adb</span> forward tcp:23496 tcp:23496 </span><br><span class="line"><span class="variable">$adb</span> reboot bootloader</span><br><span class="line"><span class="comment">#通过adb启动应用程序页面</span></span><br><span class="line"><span class="variable">$adb</span> shell am start -D -n com.example.how_debug/com.example.how_debug.MainActivity</span><br><span class="line"><span class="variable">$adb</span> push <span class="string">&quot;C:\Program Files\IDA 7.0\dbgsrv\android_x64_server&quot;</span> /data/<span class="built_in">local</span>/ax64</span><br><span class="line"><span class="variable">$adb</span> shell <span class="string">&#x27;chmod +x /data/local/*&#x27;</span></span><br><span class="line"><span class="variable">$adb</span> shell <span class="string">&#x27;cd /data/local/ &amp;&amp; ./ax64&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="fastboot"><a href="#fastboot" class="headerlink" title="fastboot"></a>fastboot</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastboot oem unlock</span><br></pre></td></tr></table></figure>

<h1 id="other"><a href="#other" class="headerlink" title="other"></a>other</h1><h2 id="mount"><a href="#mount" class="headerlink" title="mount"></a>mount</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -o rw,remount -t auto &#x2F;system</span><br></pre></td></tr></table></figure>



<h2 id="Jeb条件"><a href="#Jeb条件" class="headerlink" title="Jeb条件"></a>Jeb条件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android:debuggable&#x3D;&quot;true&quot; </span><br><span class="line">ro.debuggable&#x3D;1</span><br></pre></td></tr></table></figure>

<p>install <strong>MagiskHide Props Config</strong> and then:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">adb shell &#x2F;&#x2F;adb进入命令行模式</span><br><span class="line">su &#x2F;&#x2F;切换至超级用户</span><br><span class="line">magisk resetprop ro.debuggable 1  &#x2F;&#x2F;设置debuggable</span><br><span class="line">stop;start; &#x2F;&#x2F;一定要通过该方式重启</span><br></pre></td></tr></table></figure>

<p>Android手机系统的 ro.debuggable 这一配置位于 /default.prop 文件中，而 /default.prop 又来源于手机每次启动时 boot.img 中 ramdisk 的挂载，所以想要直接通过修改 /default.prop 是不可行的，但是系统文件是只读的，改了也没用。网上流传较广的是改 boot.img</p>
<h1 id="qemu"><a href="#qemu" class="headerlink" title="qemu"></a>qemu</h1><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yinzhengjie/p/7846595.html">https://www.cnblogs.com/yinzhengjie/p/7846595.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew install qemu</span><br><span class="line">brew install libvirt</span><br><span class="line">brew services start libvirt</span><br></pre></td></tr></table></figure>



<h2 id="1-创建磁盘映像"><a href="#1-创建磁盘映像" class="headerlink" title="1.创建磁盘映像"></a>1.创建磁盘映像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$qemu</span>-img create -f qcow2 ~/qemu/images/ubuntu-desktop-18.04.qcow2 10G</span><br></pre></td></tr></table></figure>



<h2 id="2-启动附加了Ubuntu-ISO的QEMU"><a href="#2-启动附加了Ubuntu-ISO的QEMU" class="headerlink" title="2.启动附加了Ubuntu ISO的QEMU"></a>2.启动附加了Ubuntu ISO的QEMU</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -accel hvf </span></span><br><span class="line">qemu-system-x86_64 \</span><br><span class="line">  -cpu host -smp 3 -enable-kvm -machine accel=hvf -m 2048 \</span><br><span class="line">  -net user,hostfwd=tcp::2222-:22 -net nic \</span><br><span class="line">  -usb -device usb-tablet \</span><br><span class="line">  -display default,show-cursor=on \</span><br><span class="line">  -vga virtio \</span><br><span class="line">  -cdrom ~/Parallels/Parallels\ iso/ubuntu-18.04.4-desktop-amd64.iso \</span><br><span class="line">  -drive file=/Users/notify/qemu/images/ubuntu-desktop-18.04.qcow2,<span class="keyword">if</span>=virtio,index=0,format=qcow2,media=disk \</span><br><span class="line">  -boot order=dc </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="comment">#-net user,hostfwd=tcp::4444-:5555</span></span><br><span class="line">  </span><br><span class="line">选项解释：</span><br><span class="line"><span class="comment"># cpu 内存</span></span><br><span class="line">-enable-kvm 是使用kvm内核,不用qemu的内核,开启虚拟机加速；</span><br><span class="line">-accel hvf </span><br><span class="line">-m 1024是给客户机分配1024MB内存；</span><br><span class="line">-smp 1 是给客户机分配1个CPU；</span><br><span class="line"><span class="comment"># 磁盘</span></span><br><span class="line">-boot order=dc是指定系统的启动顺序为光驱(d: CD-ROM)、硬盘(c: hard Disk)；</span><br><span class="line">-hda 是分配给客户机的IDE硬盘（即前面准备的镜像文件）；</span><br><span class="line">-boot order=dc</span><br><span class="line">-fda : (file) ;</span><br><span class="line">-fdb : (file) ; 使用指定文件（file）作为软盘镜像，</span><br><span class="line">-hda ：（file）；</span><br><span class="line">-hdb ：（file）；</span><br><span class="line">-hdc ：（file）；</span><br><span class="line">-hdd ：（file）; 使用指定file作为镜像硬盘镜像；file为/dev/fd0表示使用物理；</span><br><span class="line">-cdrom （默认占用hdc接口）是分配客户机的光驱。将file指定为/dev/cdrom可以直接使用物理光驱</span><br><span class="line">-drive：（ option[,option[,option[,.....]]]）定义一个新的硬盘设备，可用子选项有很多。</span><br><span class="line">　　file=/path/to/somefile:定义映像文件路径；</span><br><span class="line">　　<span class="keyword">if</span>=interface:指定硬盘设备所连接接口类型，即控制器类型，如</span><br><span class="line">　　ide,scsi,sd,mtd,floppy,pflash及virtio等；</span><br><span class="line">　　index=index:设定同一种控制器类型中不同设备的索引号，即标识号；</span><br><span class="line">　　media=media:定义截止类型为硬（disk）盘还是光盘（cdrom）；</span><br><span class="line">　　snapshot=snapshot:指定当前硬盘设备是否支持快照功能，on或off；</span><br><span class="line">　　cache=cache：定义如何使用物理机缓存来访问块数据，其可用值有</span><br><span class="line">　　none,writeback,unsafe和writethrough四个；</span><br><span class="line">　　format=format：指定映像文件格式，具体格式可参见qemu-img命令；</span><br><span class="line">-boot：（[order=drives][,once=drives][,menu=on|off]）定义启动设备的引导次序，每种设备使用一个字符表示，不同的架构所支持的设备及其表示字符不尽相同，在x86PC架构上,a,b表示软驱，c表示第一块硬盘，d表示第一个光驱设备，n-p表示网络适配器，默认为硬盘设备。（案例：-boot order=dc,once=d，其中order表示启动顺序，意思是先找第一个光驱设备，再去找第一块硬盘启动，而once则表示第一次启动时需要找光驱设备。）</span><br><span class="line"><span class="comment"># 其他硬件</span></span><br><span class="line"><span class="comment"># 显示</span></span><br><span class="line">-nographic : 默认情况下，qemu使用SDL来显示VGA输出；而此新选项用于禁止图形接口，此时，qemu类似一个简单的命令行程序，其仿真串口设备将被重定向到控制台；</span><br><span class="line">			ctrl a h :</span><br><span class="line">          C-a h    <span class="built_in">print</span> this <span class="built_in">help</span></span><br><span class="line">          C-a x    <span class="built_in">exit</span> emulator</span><br><span class="line">          C-a s    save disk data back to file (<span class="keyword">if</span> -snapshot)</span><br><span class="line">          C-a t    toggle console timestamps</span><br><span class="line">          C-a b    send <span class="built_in">break</span> (magic sysrq)</span><br><span class="line">          C-a c    switch between console and monitor</span><br><span class="line">          C-a C-a  sends C-a</span><br><span class="line"></span><br><span class="line">-monitor stdio:表示在标准输入输出显示monitor界面(-nographic)</span><br><span class="line">　　Ctrl-a，c:在console和monitor之间切换</span><br><span class="line">　　Ctrl-a，h：显示帮助信息。</span><br><span class="line">-curses:禁止图形接口，并使用curses/ncurses作为交互接口；</span><br><span class="line">-alt-grab:使用Ctrl+Alt+Shift组合键释放鼠标；</span><br><span class="line">-ctrl-grab:使用右Ctrl键释放鼠标；</span><br><span class="line">-sdl：启用SDL（Simple Directmedia Layer）它是用C语言编写的开源免费的多媒体程序库，它提供了一个简单的接口用于实现操作系统硬件平台的图形显示，声音，输入设备等等。目前来讲，SDL库已经被广泛应用于各个操作系统。换句话说，SDL是是能够让你的虚拟机直接在启动时在当前主机上就直接打开一个图形界面。他要求你操作系统本身要支持SDL。</span><br><span class="line">-spice：（option[,option[,......]]）启用splice远程桌面协议，其有许多子选项，具体请参考qemu-kvm的手册；</span><br><span class="line">-vga <span class="built_in">type</span> : 指定要仿真的VGA接口类型，常见的有： </span><br><span class="line">		cirrus : Cirrus Logic GD5446显示卡；</span><br><span class="line">  	std:带有Bochs VBI扩展的标准VGA显示卡；</span><br><span class="line">  	vmware:VMWare SVGA-II兼容的显示适配器；</span><br><span class="line">  	qxl:QXL半虚拟化显示卡，于VGA兼容，在Guest中安装qxl驱动后能以很好的方式工作，在使用spice协议时推荐使用此类型；</span><br><span class="line">  	none：禁用VGA卡；</span><br><span class="line">-vnc：（display[,option][,option[,......]]）默认情况下，qemu使用SDL显示VGA输出，使用VNC选项，可以让qemu监听在VNC上，并将VGA输出重定向至VNC会话，使用此选项时，必须使用-k选项指定键盘布局类型，其有许多子选项，具体请参考qemu-kvm的手册。VNC（Virtual Network Computing，应用层协议）基于RFB（远程帧缓冲）协议，来控制另外一台计算机系统，它是图像化的桌面分享系统，VNC克服了SDL只能在图形界面中运行的功能。</span><br><span class="line">	[options]:</span><br><span class="line">　　　　password：连接是需要验证密码，设置密码通过monitor接口使用change;</span><br><span class="line">　　　　reverse：“反向”连接至某出于监听状态的vncview上;</span><br><span class="line">　　　　</span><br><span class="line">		example vnc的display指定方法: </span><br><span class="line">		-vnc [ip]:[port],password   <span class="comment"># :1 表示是监听在主机的2500+N端口上！换句话说，就是监听在5901端口。</span></span><br><span class="line">				&gt; <span class="built_in">help</span> change</span><br><span class="line">		    &gt; change vnc password</span><br><span class="line">		-vnc unix:[/path/to/socket_file] <span class="comment"># 这是基于套接字进行连接，这种方式只能局限于在本机工作，无法向第一种基于IP的方式进行连接可以让其他主机来连接本地的服务。</span></span><br><span class="line">		-vnc none <span class="comment"># 表示在启动虚拟机时不启动VNC功能，将来在需要时可以在手动启动起来。</span></span><br><span class="line">				&gt; change vnc :2</span><br><span class="line">				</span><br><span class="line"></span><br><span class="line"><span class="comment"># usb</span></span><br><span class="line">-usb ：开启USB总线</span><br><span class="line">-device usb-tablet GuestOS为Windows时，tablet用于实现鼠标定位。</span><br><span class="line"></span><br><span class="line"><span class="comment"># internet</span></span><br><span class="line">-net：（tap[,valn=n][,name=name][,fd=h][,ifname=name][,script=file][,downscript=dfile]）通过物理机的TAP网络接口连接至VLAN n中，使用script=file指定的脚本（默认为/etc/qemu-ifup）来配置当前网络接口，并使用downscript=file指定的脚本（默认为/etc/qemu-ifdown）来撤销接口配置，使用script=no和downscript=no可分别用来禁止直行脚本；</span><br><span class="line">-net：（user[,option][,option][,....]）在用户模式配置网络栈，其不依赖于管理权限，有效选项有：</span><br><span class="line">  vlan=n ：连接至vlan n，默认n=0；</span><br><span class="line">  name=name：指定接口的显示名称，常用于监控模式中；</span><br><span class="line">  net=addr[/mask]：设定GuestOS可见的IP网络，掩码可选，默认为10.0.2.0/8;</span><br><span class="line">  host=addr：指定GuestOS中看到的物理机的IP地址，默认为指定网络中的第二个，即x.x.x.2;</span><br><span class="line">  dhcpstart=addr:指定DHCP服务地址池中16个地址的起始IP，默认为第16个至第31个，即x.x.x.16-x.x.x.31;</span><br><span class="line">  dns=addr:指定GuestOS可见的dns服务器地址，默认为GuestOS网络中的第三个地址,即x.x.x.3;</span><br><span class="line">  tftp=dir:激活内置的tftp服务器，并使用指定的dir作为tftp服务器的默认根目录；</span><br><span class="line">  bootfile=file：BOOTP文件名称，用于实现网络引导GuestOS，如：<span class="string">&quot;qemu -hda yinzhengjie_linux.img -boot n -net user,tftp=/tftpserver/pub,bootfile=/pxelinux.0&quot;</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">扩展小知识：KVM的虚拟网络模型</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">I386平台专用选项；</span><br><span class="line">　　-no-acpi:禁用ACPI功能，GuestOS与ACPI出现兼容问题时使用此选项；</span><br><span class="line">　　-balloon none：禁用balloon设备；</span><br><span class="line">　　-balloon virtio[,addr=addr]:启用virti balloon设备；</span><br></pre></td></tr></table></figure>







<h2 id="3启动系统"><a href="#3启动系统" class="headerlink" title="3启动系统"></a>3启动系统</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">删掉cdrom</span><br></pre></td></tr></table></figure>



<h2 id="qemu配置网卡方法："><a href="#qemu配置网卡方法：" class="headerlink" title="qemu配置网卡方法："></a>qemu配置网卡方法：</h2><p><strong>不使用sdk的qemu（命令不适用）</strong></p>
<p>Brew install qemu</p>
<p>如需要使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$export</span> PATH=<span class="variable">$ANDROID_SDK_HOME</span>/emulator/qemu/darwin-x86_64:<span class="variable">$PATH</span></span><br><span class="line"><span class="variable">$export</span> DYLD_LIBRARY_PATH=<span class="variable">$ANDROID_SDK_HOME</span>/emulator/lib64/qt/lib:<span class="variable">$DYLD_LIBRARY_PATH</span></span><br></pre></td></tr></table></figure>



<p>我之前进行过相关的测试，qemu这一块的网络连接的相关方法分享一下，配置起来稍微麻烦一点，需要创建虚拟网卡；<br>如果在本地测试可以通端口映射的方式进行；方法如下：</p>
<h3 id="方法一：创建虚拟网卡"><a href="#方法一：创建虚拟网卡" class="headerlink" title="方法一：创建虚拟网卡"></a>方法一：创建虚拟网卡</h3><p>（注意本地机器上创建的虚拟网卡和qemu上的配置的地址网段的关系）</p>
<p>一、需要安装的工具软件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$apt</span>-get install bridge-utils        <span class="comment"># 虚拟网桥工具</span></span><br><span class="line"><span class="variable">$apt</span>-get install uml-utilities       <span class="comment"># UML（User-mode linux）工具</span></span><br></pre></td></tr></table></figure>

<p>二、配置虚拟网卡的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sudo</span> ifconfig tap0 down</span><br><span class="line"><span class="variable">$sudo</span> tunctl -d tap0</span><br><span class="line"><span class="variable">$sudo</span> tunctl -b -u <span class="variable">$USER</span> -t tap0</span><br><span class="line"><span class="variable">$sudo</span> ifconfig tap0 192.168.10.1 promisc up</span><br></pre></td></tr></table></figure>

<p>三、qemu启动时需要添加相关参数，启动命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="variable">$sudo</span> qemu-system-x86_64 -enable-kvm -m 1024 -smp 2  -hda qemu-test/vdisk.img -cdrom android-x86.iso -net nic,vlan=0 -net tap,vlan=0,ifname=tap0,script=no,downscript=no</span><br><span class="line"><span class="comment">#【note 起来之后在qemu中通过命令行设置ip地址】</span></span><br><span class="line"><span class="comment">#然后在宿主机上使用adb connect x.x.x.x 连接qemu中的android系统进行相关的操作；</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="方法二、在启动qemu的时候直接进行端口映射："><a href="#方法二、在启动qemu的时候直接进行端口映射：" class="headerlink" title="方法二、在启动qemu的时候直接进行端口映射："></a>方法二、在启动qemu的时候直接进行端口映射：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sudo</span> qemu-system-x86_64 -enable-kvm -m 1024 -smp 2  -hda ./vdisk.img -cdrom <span class="variable">$android_x86_64</span>.iso -redir tcp:5555::5555</span><br><span class="line"><span class="variable">$adb</span> shell</span><br></pre></td></tr></table></figure>



<h2 id="libvirt"><a href="#libvirt" class="headerlink" title="libvirt"></a>libvirt</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew install qemu</span><br><span class="line">brew install libvirt</span><br><span class="line">brew services start libvirt</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#只是创建</span></span><br><span class="line">virsh define ~/qemu/images/ubuntu.xml</span><br><span class="line"><span class="comment">#创建后，虚拟机立即执行，成为活动主机</span></span><br><span class="line">virsh creat ~/qemu/images/ubuntu.xml</span><br></pre></td></tr></table></figure>



<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">domain</span> <span class="attr">type</span>=<span class="string">&#x27;qemu&#x27;</span> <span class="attr">xmlns:qemu</span>=<span class="string">&#x27;http://libvirt.org/schemas/domain/qemu/1.0&#x27;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>ubuntu<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uuid</span>&gt;</span>2005CB24-522A-4485-9B9A-E60A61D9F8CF<span class="tag">&lt;/<span class="name">uuid</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">memory</span> <span class="attr">unit</span>=<span class="string">&#x27;GB&#x27;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">memory</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cpu</span> <span class="attr">mode</span>=<span class="string">&#x27;custom&#x27;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">model</span>&gt;</span>Westmere<span class="tag">&lt;/<span class="name">model</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cpu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">vcpu</span>&gt;</span>2<span class="tag">&lt;/<span class="name">vcpu</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">features</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">acpi</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">apic</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">features</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">os</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">type</span> <span class="attr">arch</span>=<span class="string">&#x27;x86_64&#x27;</span> <span class="attr">machine</span>=<span class="string">&#x27;q35&#x27;</span>&gt;</span>hvm<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bootmenu</span> <span class="attr">enable</span>=<span class="string">&#x27;yes&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">os</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">clock</span> <span class="attr">offset</span>=<span class="string">&#x27;localtime&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">on_poweroff</span>&gt;</span>destroy<span class="tag">&lt;/<span class="name">on_poweroff</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">on_reboot</span>&gt;</span>restart<span class="tag">&lt;/<span class="name">on_reboot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">on_crash</span>&gt;</span>destroy<span class="tag">&lt;/<span class="name">on_crash</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pm</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">suspend-to-mem</span> <span class="attr">enabled</span>=<span class="string">&#x27;no&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">suspend-to-disk</span> <span class="attr">enabled</span>=<span class="string">&#x27;no&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pm</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">devices</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">emulator</span>&gt;</span>/usr/local/bin/qemu-system-x86_64<span class="tag">&lt;/<span class="name">emulator</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">controller</span> <span class="attr">type</span>=<span class="string">&#x27;usb&#x27;</span> <span class="attr">model</span>=<span class="string">&#x27;ehci&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">disk</span> <span class="attr">type</span>=<span class="string">&#x27;file&#x27;</span> <span class="attr">device</span>=<span class="string">&#x27;disk&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">driver</span> <span class="attr">name</span>=<span class="string">&#x27;qemu&#x27;</span> <span class="attr">type</span>=<span class="string">&#x27;qcow2&#x27;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">source</span> <span class="attr">file</span>=<span class="string">&#x27;/Users/notify/qemu/images/ubuntu-desktop-18.04.qcow2&#x27;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">target</span> <span class="attr">dev</span>=<span class="string">&#x27;vda&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;virtio&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">disk</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">disk</span> <span class="attr">type</span>=<span class="string">&#x27;file&#x27;</span> <span class="attr">device</span>=<span class="string">&#x27;cdrom&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">source</span> <span class="attr">file</span>=<span class="string">&#x27;/Users/notify/Parallels/Parallels iso/ubuntu-18.04.4-desktop-amd64.iso&#x27;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">target</span> <span class="attr">dev</span>=<span class="string">&#x27;sdb&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;sata&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">disk</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">console</span> <span class="attr">type</span>=<span class="string">&#x27;pty&#x27;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">target</span> <span class="attr">type</span>=<span class="string">&#x27;serial&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">console</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;tablet&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;usb&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;keyboard&#x27;</span> <span class="attr">bus</span>=<span class="string">&#x27;usb&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">graphics</span> <span class="attr">type</span>=<span class="string">&#x27;vnc&#x27;</span> <span class="attr">port</span>=<span class="string">&#x27;5900&#x27;</span> <span class="attr">listen</span>=<span class="string">&#x27;127.0.0.1&#x27;</span> <span class="attr">passwd</span>=<span class="string">&#x27;10010&#x27;</span> <span class="attr">keymap</span>=<span class="string">&#x27;en-us&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">video</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">model</span> <span class="attr">type</span>=<span class="string">&#x27;virtio&#x27;</span> <span class="attr">vram</span>=<span class="string">&#x27;16384&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">devices</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">seclabel</span> <span class="attr">type</span>=<span class="string">&#x27;none&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">qemu:commandline</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;-machine&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;type=q35,accel=hvf&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;-netdev&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;user,id=n1,hostfwd=tcp::2222-:22&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;-device&#x27;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">qemu:arg</span> <span class="attr">value</span>=<span class="string">&#x27;virtio-net-pci,netdev=n1,bus=pcie.0,addr=0x19&#x27;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">qemu:commandline</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">domain</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><code>Ctrl+Alt+Del</code>按钮重新启动计算机，然后快速按<code>Esc</code>进入启动菜单。</p>
<table>
<thead>
<tr>
<th>c m d</th>
<th>Mean</th>
</tr>
</thead>
<tbody><tr>
<td>virsh list</td>
<td>列表</td>
</tr>
<tr>
<td>virsh start ubuntu</td>
<td>启动虚拟机</td>
</tr>
<tr>
<td>virsh suspend x</td>
<td>暂停虚拟机</td>
</tr>
<tr>
<td>virsh resume x</td>
<td>启动暂停的虚拟机</td>
</tr>
<tr>
<td>virsh shutdown x</td>
<td>正常关闭虚拟机</td>
</tr>
<tr>
<td>virsh destroy x</td>
<td>强制关闭虚拟机</td>
</tr>
<tr>
<td>virsh dominfo x</td>
<td>显示虚拟机的基本信息</td>
</tr>
<tr>
<td>virsh vncdisplay controller</td>
<td>查看该虚拟机的端口地址</td>
</tr>
<tr>
<td>virsh domname 2</td>
<td>显示id号为2的虚拟机名</td>
</tr>
<tr>
<td>virsh domid x</td>
<td>显示虚拟机id号</td>
</tr>
<tr>
<td>virsh domuuid x</td>
<td>显示虚拟机的uuid</td>
</tr>
<tr>
<td>virsh domstate x</td>
<td>显示虚拟机的当前状态</td>
</tr>
<tr>
<td>virsh dumpxml x</td>
<td>显示虚拟机的当前配置文件</td>
</tr>
<tr>
<td>virsh setmem x 512000</td>
<td>给不活动虚拟机设置内存大小</td>
</tr>
<tr>
<td>virsh edit x</td>
<td>编辑配置文件（一般是在刚定义完虚拟机之后</td>
</tr>
</tbody></table>
<p>（可能和定义虚拟机时的配置不同，因为当虚拟机启动时，需要给虚拟机分配id号、uuid、vnc端口号等等）</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/qemu/" rel="tag"># qemu</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/03/11/ptmalloc/" rel="next" title="ptmalloc">
                <i class="fa fa-chevron-left"></i> ptmalloc
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/04/10/afl-fuzz/" rel="prev" title="fuzz ImageMagick">
                fuzz ImageMagick <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name"></p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/">
              
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/notify-bibi" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:qq2496424084@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://driverxdw.github.io/" title="driverxdwのblog" target="_blank">driverxdwのblog</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SDK"><span class="nav-number">1.</span> <span class="nav-text">SDK</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#emulator"><span class="nav-number">1.1.</span> <span class="nav-text">emulator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#adb"><span class="nav-number">1.2.</span> <span class="nav-text">adb</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fastboot"><span class="nav-number">1.3.</span> <span class="nav-text">fastboot</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#other"><span class="nav-number">2.</span> <span class="nav-text">other</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#mount"><span class="nav-number">2.1.</span> <span class="nav-text">mount</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Jeb%E6%9D%A1%E4%BB%B6"><span class="nav-number">2.2.</span> <span class="nav-text">Jeb条件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#qemu"><span class="nav-number">3.</span> <span class="nav-text">qemu</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%88%9B%E5%BB%BA%E7%A3%81%E7%9B%98%E6%98%A0%E5%83%8F"><span class="nav-number">3.1.</span> <span class="nav-text">1.创建磁盘映像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%90%AF%E5%8A%A8%E9%99%84%E5%8A%A0%E4%BA%86Ubuntu-ISO%E7%9A%84QEMU"><span class="nav-number">3.2.</span> <span class="nav-text">2.启动附加了Ubuntu ISO的QEMU</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3%E5%90%AF%E5%8A%A8%E7%B3%BB%E7%BB%9F"><span class="nav-number">3.3.</span> <span class="nav-text">3启动系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#qemu%E9%85%8D%E7%BD%AE%E7%BD%91%E5%8D%A1%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="nav-number">3.4.</span> <span class="nav-text">qemu配置网卡方法：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E7%BD%91%E5%8D%A1"><span class="nav-number">3.4.1.</span> <span class="nav-text">方法一：创建虚拟网卡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C%E3%80%81%E5%9C%A8%E5%90%AF%E5%8A%A8qemu%E7%9A%84%E6%97%B6%E5%80%99%E7%9B%B4%E6%8E%A5%E8%BF%9B%E8%A1%8C%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84%EF%BC%9A"><span class="nav-number">3.4.2.</span> <span class="nav-text">方法二、在启动qemu的时候直接进行端口映射：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#libvirt"><span class="nav-number">3.5.</span> <span class="nav-text">libvirt</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">notify</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
